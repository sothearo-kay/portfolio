---
import type { CollectionEntry } from "astro:content"
import Date from "~/components/common/Date.astro"
import Heading from "~/components/common/Heading.astro"
import Paragraph from "~/components/common/Paragraph.astro"

interface Props {
  post: CollectionEntry<"blog">
}

const { post } = Astro.props
---

<article class="card">
  <a href={`/blog/${post.id}`} class="link">
    <Heading as="h2" size="lg" class="title">
      {post.data.title}
    </Heading>

    <Paragraph secondary size="xs" class="description">
      {post.data.description}
    </Paragraph>

    <div class="meta">
      <Date date={post.data.publishedAt} />
      {post.data.tags.length > 0 && (
        <div class="tags">
          {post.data.tags.map(tag => (
            <span class="tag">{tag}</span>
          ))}
        </div>
      )}
    </div>
  </a>
</article>

<style>
.card {
  border: 1px solid transparent;
  border-radius: 0.5rem;
  transition: all 0.2s ease;

  &:hover {
    background: color-mix(in srgb, var(--color-accent) 40%, transparent);
    border-color: var(--color-border-subtle);
  }

  .link {
    display: block;
    padding: 1.5rem;
    color: inherit;
    text-decoration: none;
  }

  & .title {
    font-family: var(--font-heading);
    margin-block: 0;
  }

  & .description {
    margin-top: 0.5rem;
    margin-bottom: 0.75rem;
  }

  .meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;

    .tags {
      display: flex;
      gap: 0.25rem;

      .tag {
        font: var(--font-xs);
        color: var(--color-foreground-muted);
        background: var(--color-background-secondary);
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
      }
    }
  }
}
</style>
